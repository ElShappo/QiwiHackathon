<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <script src="./index.js" type="module"></script> -->
</head>
<body>
    <main class="valute-details">
        <header class="valute-details-header">

        </header>
        <div class="valute-details-data">

        </div>
    </main>
    <select name="choice" class="dropdown">
        <option value="-1" selected disabled>Выберите валюту</option>
    </select>
</body>

<script>
    let data = fetch('https://www.cbr-xml-daily.ru/daily_json.js')
                .then(response => response.json())
                .then(response => {
                    let valutes = response.Valute;
                    let entries = Object.entries(valutes);

                    let keys = Object.keys(valutes);
                    let values = Object.values(valutes);

                    console.log(keys);
                    console.log(values);

                    let dropdown = document.querySelector('.dropdown');
                    let count = 1;
                    for (let {ID, Name} of values) {
                        dropdown.insertAdjacentHTML('afterbegin', `<option value="${count}">${ID} - ${Name}</option>`);
                        ++count;
                    }
                    dropdown.addEventListener('change', (e) => {
                        let id = e.target.value;
                        let currentElement = values[id-1];

                        let detailsHeader = document.querySelector('.valute-details-header');
                        console.log(detailsHeader);

                        let ID = currentElement.ID;
                        let Name = currentElement.Name;
                        let CharCode = currentElement.CharCode;
                        
                        detailsHeader.innerHTML = `${ID} - ${Name} (${CharCode})`;

                        let date = response.Date;
                        let reviousDate = response.PreviousDate;

                        console.log(date, PreviousDate)

                        let detailsData = document.querySelector('.valute-details-data');
                        detailsData.innerHTML = `<div>${response.Date}</div>
                        <div>${response.PreviousDate}</div>`;
                        


                    });

                });

</script>

<link rel="stylesheet" href="./styles.css" />
</html>